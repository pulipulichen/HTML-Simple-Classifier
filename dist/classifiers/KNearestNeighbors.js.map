{"version":3,"sources":["webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.yaml","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.less","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.html?7488","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.less?41cd","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.html","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.js","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.js?fa1d","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.less?ae79","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.vue","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.yaml?4aee","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighborsMethodsBuild.js","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighborsMethodsShow.js","webpack:///./src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighborsMethodsTest.js"],"names":[],"mappings":";;;;;;;;;AAAA;AACA;AACA,kCAAkC,MAAM,8BAA8B,UAAU,uBAAuB;AACvG;AACA;;;;;;;;;;;;ACJA;AACA,kCAAkC,mBAAO,CAAC,8GAAyD;AACnG;AACA;AACA,cAAc,QAAS,UAAU,kFAAkF;AACnH;AACA;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,oBAAoB,8BAA8B;AAClD,eAAe,0BAA0B;AACzC;AACA;AACA;AACA;AACA,kBAAkB,uCAAuC;AACzD,kBAAkB,iBAAiB;AACnC,eAAe;AACf,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC,mBAAmB;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrDA;;AAEA;AACA,cAAc,mBAAO,CAAC,4iBAA8Q;AACpS;AACA,4CAA4C,QAAS;AACrD;AACA;AACA,UAAU,mBAAO,CAAC,gIAAmE;AACrF,+CAA+C;AAC/C;AACA,GAAG,KAAU,EAAE,E;;;;;;;;;;;;ACXf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,W;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA,uFAAuF;AACvF,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,OAAO;;AAEP;AACA,GAAG;AACH;AACA;;AAE8E;AAC9E,iFAA6B;;AAE+C;AAC5E,gFAA4B;;AAEgD;AAC5E,gFAA4B;;AAEb,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA,wCAAoE,CAAgB,qJAAG,EAAC,C;;;;;;;;;;;;ACAxF;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA6G;AACzC;AACL;AACwC;;;AAGvG;AACgG;AAChG,gBAAgB,2GAAU;AAC1B,EAAE,sFAAM;AACR,EAAE,yGAAM;AACR,EAAE,kHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACgQ;AAChQ,WAAW,kRAAM,iBAAiB,0RAAM;;AAExC;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;AC3Cf;AAAA;AAAA;AAAA;AAA+T,CAAgB,kYAAG,EAAC,C;;;;;;;;;;;;ACAnV;AAAA;AAAwB;;AAET;AACf;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,eAAe,8CAAG;AAClB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AC9FA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,C;;;;;;;;;;;;AC/BA;AAAA;AAAwB;AACxB;;AAEe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,8CAAG;;AAErB;;AAEA;;AAEA;AACA;AACA,C","file":"classifiers/KNearestNeighbors.js","sourcesContent":["module.exports = function (Component) {\n  Component.options.__i18n = Component.options.__i18n || []\n  Component.options.__i18n.push('{\"en\":{\"TEST_MESSAGE\":\"Test Message\"},\"zh-TW\":{\"TEST_MESSAGE\":\"測試訊息\"}}')\n  delete Component.options._Ctor\n}\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(true);\n// Module\nexports.push([module.id, \"\", \"\",{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\",\"file\":\"KNearestNeighbors.less\"}]);\n// Exports\nmodule.exports = exports;\n","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\"div\", { staticClass: \"DecisionTree\" }, [\n    _c(\"div\", { staticClass: \"ui field\" }, [\n      _c(\n        \"button\",\n        {\n          staticClass: \"ui primary fluid button\",\n          class: { disabled: !_vm.$parent.isNeedPredict },\n          attrs: { type: \"button\" },\n          on: { click: _vm.start }\n        },\n        [\n          !_vm.isModelBuilded\n            ? [\n                _vm._v(\n                  \"\\r\\n        \" +\n                    _vm._s(_vm.$t(\"Build Model and Predict\")) +\n                    \"\\r\\n      \"\n                )\n              ]\n            : _vm._e(),\n          _vm._v(\" \"),\n          _vm.isModelBuilded\n            ? [\n                _vm._v(\n                  \"\\r\\n        \" + _vm._s(_vm.$t(\"Predict\")) + \"\\r\\n      \"\n                )\n              ]\n            : _vm._e()\n        ],\n        2\n      )\n    ]),\n    _vm._v(\" \"),\n    _vm.isModelBuilded\n      ? _c(\"div\", { staticClass: \"ui field\" }, [\n          _c(\n            \"button\",\n            {\n              staticClass: \"ui primary fluid button\",\n              attrs: { type: \"button\" },\n              on: { click: _vm.showModel }\n            },\n            [_vm._v(\"\\r\\n      \" + _vm._s(_vm.$t(\"Show Model\")) + \"\\r\\n    \")]\n          )\n        ])\n      : _vm._e()\n  ])\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./KNearestNeighbors.less?vue&type=style&index=0&id=1295245c&lang=less&scoped=true&\");\nif(content.__esModule) content = content.default;\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"220033e5\", content, false, {});\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./KNearestNeighbors.less?vue&type=style&index=0&id=1295245c&lang=less&scoped=true&\", function() {\n     var newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./KNearestNeighbors.less?vue&type=style&index=0&id=1295245c&lang=less&scoped=true&\");\n     if(newContent.__esModule) newContent = newContent.default;\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}","export * from \"-!../../../../node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./KNearestNeighbors.html?vue&type=template&id=1295245c&scoped=true&\"","let KNearestNeighbors = {\r\n  props: ['config', 'localConfig', 'utils'],\r\n  data () {    \r\n    this.$i18n.locale = this.localConfig.locale\r\n    return {\r\n      model: null\r\n    }\r\n  },\r\n  watch: {\r\n    'localConfig.locale'() {\r\n      this.$i18n.locale = this.localConfig.locale;\r\n    },\r\n  },\r\n  computed: {\r\n    isModelBuilded () {\r\n      //console.log(this.localConfig)\r\n      return (this.localConfig.modelJSON !== null && this.localConfig.modelJSON !== '{}')\r\n    },\r\n    modelCSSURL () {\r\n      let currentURL = location.href\r\n      return currentURL.slice(0, currentURL.lastIndexOf('/') + 1)\r\n        + 'assets/classifiers/DecisionTree/style.css'\r\n    }\r\n  },\r\n  mounted() {\r\n//    setTimeout(() => {\r\n//      this.start()\r\n//    }, 1000)\r\n\r\n    //this.testKNN()\r\n  },\r\n  methods: {}\r\n}\r\n\r\nimport KNearestNeighborsMethodsBuild from './KNearestNeighborsMethodsBuild.js'\r\nKNearestNeighborsMethodsBuild(KNearestNeighbors)\r\n\r\nimport KNearestNeighborsMethodsShow from './KNearestNeighborsMethodsShow.js'\r\nKNearestNeighborsMethodsShow(KNearestNeighbors)\r\n\r\nimport KNearestNeighborsMethodsTest from './KNearestNeighborsMethodsTest.js'\r\nKNearestNeighborsMethodsTest(KNearestNeighbors)\r\n\r\nexport default KNearestNeighbors","import mod from \"-!./KNearestNeighbors.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!./KNearestNeighbors.js?vue&type=script&lang=js&\"","export * from \"-!../../../../node_modules/vue-style-loader/index.js!../../../../node_modules/css-loader/dist/cjs.js?sourceMap!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/less-loader/dist/cjs.js??ref--1-2!./KNearestNeighbors.less?vue&type=style&index=0&id=1295245c&lang=less&scoped=true&\"","import { render, staticRenderFns } from \"./KNearestNeighbors.html?vue&type=template&id=1295245c&scoped=true&\"\nimport script from \"./KNearestNeighbors.js?vue&type=script&lang=js&\"\nexport * from \"./KNearestNeighbors.js?vue&type=script&lang=js&\"\nimport style0 from \"./KNearestNeighbors.less?vue&type=style&index=0&id=1295245c&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1295245c\",\n  null\n  \n)\n\n/* custom blocks */\nimport block0 from \"./KNearestNeighbors.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=E%3A%5Cpudding%5CCode-Porjects%5Chtml-api%5CHTML-Simple-Classifier%5Csrc%5Ccomponents%5CConfigurationPanel%5CKNearestNeighbors%5CKNearestNeighbors.vue&lang=yaml\"\nif (typeof block0 === 'function') block0(component)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\pudding\\\\Code-Porjects\\\\html-api\\\\HTML-Simple-Classifier\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('1295245c')) {\n      api.createRecord('1295245c', component.options)\n    } else {\n      api.reload('1295245c', component.options)\n    }\n    module.hot.accept(\"./KNearestNeighbors.html?vue&type=template&id=1295245c&scoped=true&\", function () {\n      api.rerender('1295245c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"src/components/ConfigurationPanel/KNearestNeighbors/KNearestNeighbors.vue\"\nexport default component.exports","import mod from \"-!../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./KNearestNeighbors.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=E%3A%5Cpudding%5CCode-Porjects%5Chtml-api%5CHTML-Simple-Classifier%5Csrc%5Ccomponents%5CConfigurationPanel%5CKNearestNeighbors%5CKNearestNeighbors.vue&lang=yaml\"; export default mod; export * from \"-!../../../../node_modules/@kazupon/vue-i18n-loader/lib/index.js!./KNearestNeighbors.yaml?vue&type=custom&index=0&blockType=i18n&issuerPath=E%3A%5Cpudding%5CCode-Porjects%5Chtml-api%5CHTML-Simple-Classifier%5Csrc%5Ccomponents%5CConfigurationPanel%5CKNearestNeighbors%5CKNearestNeighbors.vue&lang=yaml\"","import KNN from 'ml-knn'\r\n\r\nexport default function (KNearestNeighbors) {\r\n  KNearestNeighbors.methods.startPredict = async function () {\r\n    return await this.start()\r\n  }\r\n    \r\n  KNearestNeighbors.methods.start = async function () {\r\n    //this.localConfig.modelJSON = null\r\n    this.config.loadingProgress = 0\r\n    console.log('start', 1)\r\n    let data = await this.$parent.getVectorData()\r\n    console.log(data)\r\n    //return false\r\n    this.config.loadingProgress = 0.25\r\n    \r\n    console.log('start', 2)\r\n    //console.log(data.trainSet[0])\r\n    \r\n    console.log('start', 3)\r\n    //if (!this.model) {\r\n      this.model = this.buildModel(data)\r\n    //}\r\n\r\n    //console.log(this.model)\r\n    console.log('start', 5)\r\n\r\n    this.config.loadingProgress = 0.5\r\n    \r\n    console.log('start', 9)\r\n    //console.log(data.testSet)\r\n    let predictResults = await this.getPredictResults(this.model, data)\r\n    console.log(predictResults)\r\n    if (predictResults[0] === 'undefined') {\r\n      this.config.loadingProgress = 1\r\n      console.error('predict is undefined')\r\n      return false\r\n    }\r\n    \r\n    console.log('start', 10)\r\n    this.config.loadingProgress = 0.75\r\n    \r\n    if (this.$parent.hasModelEvaluated === false) {\r\n      this.evaluationResults(data, predictResults)\r\n    }\r\n    \r\n    //console.log(predictResults)\r\n    this.$parent.setPredictResults(predictResults)\r\n    \r\n    this.config.loadingProgress = 0.9\r\n    \r\n    if (this.$parent.isModelWindowOpened) {\r\n      this.showModel()\r\n    }\r\n    \r\n    this.config.loadingProgress = 1\r\n  }\r\n  \r\n  KNearestNeighbors.methods.buildModel = function (data){\r\n    let dataset = data.testSet\r\n    let predictions = data.trainSetClasses\r\n    return new KNN(dataset, predictions)\r\n  }\r\n  \r\n  KNearestNeighbors.methods.getPredictResults = async function (model, data) {\r\n    let testSet = data.testSet\r\n    let resultVector = model.predict(testSet);\r\n    let trainSetClassesDict = data.trainSetClassesDict\r\n    console.log(trainSetClassesDict)\r\n    return resultVector.map(index => {\r\n      return trainSetClassesDict[index]\r\n    })\r\n  }\r\n  \r\n  KNearestNeighbors.methods.evaluationResults = async function (data, predictResults) {\r\n    let getTrainSetPredicts = await this.$parent.getTrainSetPredicts(predictResults, data.testSetRowIndexes)\r\n    //console.log(data.trainSetClasses)\r\n    //console.log(getTrainSetPredicts)\r\n\r\n    this.$parent.resetModelEvaluation()\r\n\r\n    //console.log(data.trainSetClasses.length, getTrainSetPredicts.length, data.testSetRowIndexes.length)\r\n\r\n    let accuracy = await this.$parent.calcAccuracy(data.trainSetClasses, getTrainSetPredicts)\r\n    //console.log(accuracy)\r\n    let accuracyInfo = {\r\n      name: 'accuracy',\r\n      type: 'percent',\r\n      value: accuracy\r\n    }\r\n    \r\n    //console.log(accuracyInfo)\r\n    this.localConfig.modelEvaluations.push(accuracyInfo)\r\n  }\r\n}","export default function (KNearestNeighbors) {\r\n  KNearestNeighbors.methods.showModel = async function () {\r\n    if (!this.model) {\r\n      await this.start()\r\n      //console.error('no this.model')\r\n      //return false\r\n    }\r\n    \r\n    let bodyHTML = await this.model.treeToHtml()\r\n    bodyHTML = `<div class=\"tree\">${bodyHTML}</div>`\r\n    //console.error('[TODO]')\r\n    //console.log()\r\n    let title = this.$t('Decision Tree') + ` (` + (new Date()).mmddhhmm() + ')'\r\n    \r\n    if (this.$parent.isModelWindowOpened === false) {\r\n      this.$parent.modelWindow = this.utils.PopupUtils.open({\r\n        windowName: 'DecisionTreeModelShow',\r\n        cssURL: this.modelCSSURL,\r\n        bodyHTML,\r\n        size: 'right',\r\n        title\r\n      })\r\n    }\r\n    else {\r\n      this.$parent.modelWindow.setHTML(bodyHTML)\r\n      this.$parent.modelWindow.setTitle(title)\r\n    }\r\n    \r\n    this.$parent.modelWindow.scrollToTop()\r\n    this.$parent.modelWindow.scrollToCenter()\r\n  }\r\n}","import KNN from 'ml-knn'\r\n// https://www.npmjs.com/package/ml-knn\r\n\r\nexport default function (KNearestNeighbors) {\r\n  KNearestNeighbors.methods.testKNN = async function () {\r\n    var dataset = [\r\n      [0, 0, 0],\r\n      [0, 1, 1],\r\n      [1, 1, 0],\r\n      [2, 2, 2],\r\n      [1, 2, 2],\r\n      [2, 1, 2]\r\n    ];\r\n    var predictions = [0, 0, 0, 1, 1, 1];\r\n    var knn = new KNN(dataset, predictions);\r\n    \r\n    var dataset = [[0, 0, 0], [2, 2, 2]];\r\n \r\n    var ans = knn.predict(dataset);\r\n    \r\n    console.log(ans)\r\n  }\r\n}"],"sourceRoot":""}